# Clone Sweeper — GitHub repo clones summary & SVG card

A small tool that fetches your GitHub repositories and GitHub clone counts and generates:

**REPO_CLONES.svg** — a full table (SVG), suitable for linking/embed in READMEs

![Clone Sweeper](https://raw.githubusercontent.com/HelixCipher/clone-sweeper/main/REPO_CLONES.svg)

**stats.svg** — a compact card you can embed in your GitHub profile README.

![Clone Sweeper](https://raw.githubusercontent.com/HelixCipher/clone-sweeper/main/stats.svg)

Runs automatically via GitHub Actions (cron + manual dispatch). Safe defaults: public repos only. Private repos are opt—in.

---

## What’s in this repo

* clone_sweeper.py — the main script (auto—detects owner, generates outputs, optionally commits/pushes)

* requirements.txt — third—party packages (only requests)

* .github/workflows/update—stats.yml — Actions workflow that runs the script periodically

* REPO_CLONES.svg, stats.svg — generated by the script (created on first run)

---

## TL;DR — Get it running in 3 steps

Create a repo (or use this one).

Add repository secret TOKEN (see Secrets & permissions).

Trigger the workflow (Actions → Update repo stats → Run workflow) or run locally:

```bash

# local quick run (public—only mode)
python clone_sweeper.py

# local with push (commits outputs back to this repo)
export TOKEN="ghp_xxx"         # real PAT if you want clone stats or private repos
python clone_sweeper.py ——push

# include private repos (opt—in)
python clone_sweeper.py ——include—private ——push
# or
export INCLUDE_PRIVATE=true
python clone_sweeper.py ——push

```

---

## How it works (short)

* The script auto—detects the GitHub owner in this order:

1. --owner CLI arg

2. GITHUB_REPOSITORY env (set by Actions)

3. TOKEN via /user API

4. local git remote origin URL

* It lists repos, optionally filters out private repos (default: exclude), and calls GitHub’s traffic API for clones.

* Writes REPO_CLONES.svg (full table) and stats.svg (summary card). Optionally commits & pushes them back to the repo when --push is used (or Actions runs it).

---


## Embedding the SVGs in your profile README

Add this line to your profile README to embed the compact card:

```md

![GitHub repo clones](https://raw.githubusercontent.com/<YOUR_USERNAME>/<STATS_REPO>/main/stats.svg)

```

### Example:

```md

![GitHub repo clones](https://raw.githubusercontent.com/HelixCipher/clone—sweeper/main/stats.svg)


```

### Add this line to your profile README to embed the full table SVG

```md

![GitHub repo clones](https://raw.githubusercontent.com/<YOUR_USERNAME>/<STATS_REPO>/main/REPO_CLONES.svg)


```


## GitHub Actions: how the workflow is configured

The workflow in .github/workflows/update—stats.yml:

* checks out the repo (persist—credentials: false),

* sets minimal git identity for commits,

* installs dependencies,

* runs python clone_sweeper.py --push.

It expects the repository secret TOKEN. To keep private repos excluded by default the workflow sets:

```yaml

env:
  TOKEN: ${{ secrets.TOKEN }}
  INCLUDE_PRIVATE: "false"   # change to "true" OR add ——include—private to the run command
  GITHUB_REPOSITORY: ${{ github.repository }}

```


### To include private repos automatically, either:

* change the run command to python clone_sweeper.py --include—private --push, OR

* set INCLUDE_PRIVATE: "true" in the job env.


---

## Secrets & permissions (IMPORTANT)

* The script uses the env var TOKEN by default.

* To see clone counts (even for public repos) you must use a real Personal Access Token (PAT). A fake token will not work.

* Recommended PAT scopes (classic token):

repo (required to read traffic/clones and to access private repos)

### Security:

* Never commit your PAT to source control.

* Store it in repo Settings → Secrets → Actions as TOKEN.

* Avoid printing secret values in logs.


---

## Options & behavior

* --owner <owner> — explicitly set the GitHub owner (overrides detection).

* --push — commit & push REPO_CLONES.svg and stats.svg back to the repo.

* --include—private — opt—in to include private repos (requires a PAT owned by the repo owner with repo scope).

* --token—env <NAME> — change the token env var name (default: TOKEN).

* Default behavior = **public repos only** and clone columns will show N/A if the token is missing or lacks permission to access clone data.

---

## Troubleshooting & common fixes

### traffic/clones unavailable / 401 / N/A

* Cause: token missing, misnamed secret, or token lacks repo scope / not owner.

* Fix: add a valid PAT as TOKEN in the repository secrets with repo scope. Confirm the workflow step has env: TOKEN: ${{ secrets.TOKEN }}.

### Author identity unknown / fatal: empty ident name

* Occurs when git commit runs in CI without git config.

* Fix: workflow already sets git config user.email "actions@github.com" and git config user.name "github—actions[bot]". Locally, run the same or set your global config.

### push rejected — fetch first

* Means remote has commits you don’t have locally (GitHub may have added README/license).

* Fix options:

* If starting fresh: git push --force—with—lease (replaces remote history).

* If you want to retain remote initial commit: git pull origin main --allow—unrelated—histories then resolve and push.

### Clone counts look wrong / zero

* Clone stats are a sliding window (GitHub reports ~last 14 days). The script does not accumulate historical totals — it reports what GitHub returns. If you want history, enable CSV snapshotting (future feature).

### Action runs but still shows authenticated as: None

* The workflow must pass the secret to the step running the script; ensure env: TOKEN: ${{ secrets.TOKEN }} is present on the step that runs the Python script.

---


## License & Attribution

This project is licensed under the **Creative Commons Attribution 4.0 International (CC BY 4.0)** license.

You are free to **use, share, copy, modify, and redistribute** this material for any purpose (including commercial use), **provided that proper attribution is given**.

### Attribution requirements

Any reuse, redistribution, or derivative work **must** include:

1. **The creator’s name**: `HelixCipher`
2. **A link to the original repository**:  
   https://github.com/HelixCipher/clone—sweeper
3. **An indication of whether changes were made**
4. **A reference to the license (CC BY 4.0)**

#### Example Attribution

> This work is based on *one—persons—feature—is—another—persons—exploit* by `HelixCipher`.  
> Original source: https://github.com/HelixCipher/clone—sweeper
> Licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0).

You may place this attribution in a README, documentation, credits section, or other visible location appropriate to the medium.

Full license text: https://creativecommons.org/licenses/by/4.0/


---

## Disclaimer

This project is provided **“as—is”**. The author accepts no responsibility for how this material is used. There is **no warranty** or guarantee that the scripts are safe, secure, or appropriate for any particular purpose. Use at your own risk.

see `DISCLAIMER.md` for full terms. Use at your own risk.